<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Joerg Steinkamp" />

<meta name="date" content="2017-08-08" />

<title>Introduction to DGVM3D</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Introduction to DGVM3D</h1>
<h4 class="author"><em>Joerg Steinkamp</em></h4>
<h4 class="date"><em>2017-08-08</em></h4>



<p>This package renders the vegetation structure of individual and cohort based dynamic (global) vegetation models (DGVM) with gap dynamic. Here I present how to derive the required data with the DGVM <a href="http://iis4.nateko.lu.se/lpj-guess/">LPJ-GUESS</a> <span class="citation">(Smith, Prentice, and Sykes 2001; Smith et al. 2014)</span>.</p>
<div id="code-to-be-part-of-an-external-dgvm" class="section level1">
<h1>Code to be part of an external DGVM</h1>
<p>So far LPJ-GUESS is the only model included.</p>
<div id="c-code-to-include-in-lpj-guess" class="section level2">
<h2>C++ code to include in LPJ-GUESS</h2>
<p>LPJ-GUESS is hirachically organized in stands, which contain a certain number of patches, where the vegetation grows. The default output is averaged over those patches, to represent different successional states of vegetation per gridpoint. This library needs the output of each patch, therefore an additional output module is needed.</p>
<p>To create the required output table a new output module needs to be registered in LPJ-GUESS. In the source code the following header and code files need to be placed in the modules subdirectory of the LPJ-GUESS source code. And they have to be added in the CMakeList.txt file at the appropriate position.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">///////////////////////////////////////////////////////////////////////////////////////</span>
<span class="er">/// \file vegstructoutput.h</span>
<span class="er">/// \brief Output module for patch based vegetation structure</span>
<span class="co">///</span>
<span class="er">/// \author Joerg Steinkamp</span>
<span class="co">///</span> <span class="er">$</span>Date: Thu Nov  <span class="dv">3</span> <span class="dv">11</span>:<span class="dv">15</span>:<span class="dv">37</span> CET <span class="dv">2016</span> <span class="er">$</span>
<span class="co">///</span>
<span class="co">///////////////////////////////////////////////////////////////////////////////////////</span>
<span class="ot">#ifndef LPJ_GUESS_VEGSTRUCT_OUTPUT_H</span>
<span class="ot">#define LPJ_GUESS_VEGSTRUCT_OUTPUT_H</span>
<span class="ot">#include &quot;outputmodule.h&quot;</span>
<span class="ot">#include &quot;outputchannel.h&quot;</span>
<span class="ot">#include &quot;gutil.h&quot;</span>
<span class="kw">namespace</span> GuessOutput {
  <span class="kw">class</span> VegstructOutput : <span class="kw">public</span> OutputModule {
  <span class="kw">public</span>:
    VegstructOutput();
    ~VegstructOutput();
    <span class="co">// implemented functions inherited from OutputModule</span>
    <span class="co">// (see documentation in OutputModule)</span>
    <span class="dt">void</span> init();
    <span class="dt">void</span> outannual(Gridcell&amp; gridcell);
    <span class="dt">void</span> outdaily(Gridcell&amp; gridcell);
  <span class="kw">private</span>:
    xtring file_vegstruct;
    FILE *out_vegstruct;
  };
}
<span class="ot">#endif</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">///////////////////////////////////////////////////////////////////////////////////////</span>
<span class="er">/// \file vegstructoutput.cpp</span>
<span class="er">/// \brief Output module for patch based vegetation structure</span>
<span class="co">///</span>
<span class="er">/// \author Joerg Steinkamp</span>
<span class="co">///</span> <span class="er">$</span>Date: Thu Nov  <span class="dv">3</span> <span class="dv">11</span>:<span class="dv">15</span>:<span class="dv">37</span> CET <span class="dv">2016</span> <span class="er">$</span>
<span class="co">///</span>
<span class="co">///////////////////////////////////////////////////////////////////////////////////////</span>
<span class="ot">#include &quot;config.h&quot;</span>
<span class="ot">#include &quot;vegstructoutput.h&quot;</span>
<span class="ot">#include &quot;parameters.h&quot;</span>
<span class="ot">#include &quot;guess.h&quot;</span>
<span class="kw">namespace</span> GuessOutput {
    REGISTER_OUTPUT_MODULE(<span class="st">&quot;vegstruct&quot;</span>, VegstructOutput)
    VegstructOutput::VegstructOutput() {
    declare_parameter(<span class="st">&quot;file_vegstruct&quot;</span>, &amp;file_vegstruct, <span class="dv">300</span>, <span class="st">&quot;Detailed vegetation structure&quot;</span>);
  }
  VegstructOutput::~VegstructOutput() {
  }
  <span class="dt">void</span> VegstructOutput::init() {
    <span class="kw">if</span> (file_vegstruct != <span class="st">&quot;&quot;</span>) {
      std::string full_path = (<span class="dt">char</span>*) file_vegstruct;
      out_vegstruct = fopen(full_path.c_str(), <span class="st">&quot;w&quot;</span>);
      <span class="kw">if</span> (out_vegstruct == NULL) {
        fail(<span class="st">&quot;Could not open </span><span class="ch">%s</span><span class="st"> for output</span><span class="ch">\n</span><span class="st">&quot;</span>                         \
             <span class="st">&quot;Close the file if it is open in another application&quot;</span>,
             full_path.c_str());
      } <span class="kw">else</span> {
        dprintf(<span class="st">&quot;dummy</span><span class="ch">\n</span><span class="st">&quot;</span>);
        fprintf(out_vegstruct, <span class="st">&quot;Lon Lat Year SID PID VID Pft Lifeform LeafType PhenType Pathway Age LAI ShadeType N DBH Height Crownarea</span><span class="ch">\n</span><span class="st">&quot;</span>);
      }
    }
  }
  <span class="dt">void</span> VegstructOutput::outdaily(Gridcell&amp; gridcell) {
    <span class="kw">return</span>;
  }
  <span class="dt">void</span> VegstructOutput::outannual(Gridcell&amp; gridcell) {
    <span class="kw">if</span> (file_vegstruct == <span class="st">&quot;&quot;</span>)
      <span class="kw">return</span>;
    <span class="kw">if</span> (date.year &gt;= nyear_spinup<span class="dv">-50</span>) {
      <span class="dt">double</span> lon = gridcell.get_lon();
      <span class="dt">double</span> lat = gridcell.get_lat();
      Gridcell::iterator gc_itr = gridcell.begin();
      <span class="kw">while</span> (gc_itr != gridcell.end()) {
        Stand&amp; stand = *gc_itr;
        stand.firstobj();
        <span class="kw">while</span> (stand.isobj) {
          Patch&amp; patch = stand.getobj();
          Vegetation&amp; vegetation = patch.vegetation;
          vegetation.firstobj();
          <span class="kw">while</span> (vegetation.isobj) {
            Individual&amp; indiv=vegetation.getobj();
            <span class="co">// guess2008 - alive check added</span>
            <span class="kw">if</span> (indiv.id != <span class="dv">-1</span> &amp;&amp; indiv.alive) {
              fprintf(out_vegstruct, <span class="st">&quot;</span><span class="ch">%7.2f</span><span class="st"> </span><span class="ch">%6.2f</span><span class="st"> </span><span class="ch">%4i</span><span class="st"> &quot;</span>, lon, lat, date.get_calendar_year() );
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    stand.id);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    patch.id);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    indiv.id);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%10s</span><span class="st"> &quot;</span>,  (<span class="dt">char</span>*) indiv.pft.name);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    indiv.pft.lifeform);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    indiv.pft.leafphysiognomy);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    indiv.pft.phenology);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    indiv.pft.pathway);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%4.0f</span><span class="st"> &quot;</span>, indiv.age);
              fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%6.2f</span><span class="st"> &quot;</span>, indiv.lai);
              <span class="kw">if</span> (indiv.pft.lifeform == TREE) {
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%4.1f</span><span class="st"> &quot;</span>, indiv.pft.alphar);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%4.0f</span><span class="st"> &quot;</span>, indiv.densindiv * patcharea);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%7.2f</span><span class="st"> &quot;</span>, pow(indiv.height/indiv.pft.k_allom2,<span class="fl">1.0</span>/indiv.pft.k_allom3));
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%8.2f</span><span class="st"> &quot;</span>, indiv.height);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%8.2f</span><span class="st"> &quot;</span>, indiv.crownarea);
              } <span class="kw">else</span> <span class="kw">if</span> (indiv.pft.lifeform == GRASS) {
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%4.1f</span><span class="st"> &quot;</span>, <span class="fl">-1.0</span>);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,     <span class="dv">1</span>);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    <span class="dv">-1</span>);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    <span class="dv">-1</span>);
                fprintf(out_vegstruct, <span class="st">&quot; </span><span class="ch">%i</span><span class="st"> &quot;</span>,    <span class="dv">-1</span>);
              }
              fprintf(out_vegstruct, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>);
            }
            vegetation.nextobj();
          }
          stand.nextobj();
        }
        ++gc_itr;
      }
    }
  } <span class="co">// END of void VegStructOutput::outannual</span>
} <span class="co">// END of namespace VegStructOutput</span></code></pre></div>
<p>The code writes the following output columns including a header line, if the parameter <code>file_vestruct</code> is defined in the instruction file.</p>
<table>
<colgroup>
<col width="18%"></col>
<col width="15%"></col>
<col width="66%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left">Column name</th>
<th align="center">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lon</td>
<td align="center">numeric</td>
<td align="left">longitude</td>
</tr>
<tr class="even">
<td align="left">Lat</td>
<td align="center">numeric</td>
<td align="left">latitude</td>
</tr>
<tr class="odd">
<td align="left">Year</td>
<td align="center">integer</td>
<td align="left">year</td>
</tr>
<tr class="even">
<td align="left">SID</td>
<td align="center">integer</td>
<td align="left">Stand ID</td>
</tr>
<tr class="odd">
<td align="left">PID</td>
<td align="center">integer</td>
<td align="left">Patch ID</td>
</tr>
<tr class="even">
<td align="left">VID</td>
<td align="center">integer</td>
<td align="left">Vegetation ID; the ID of a cohort or individuum</td>
</tr>
<tr class="odd">
<td align="left">Pft</td>
<td align="center">character</td>
<td align="left">Name of the PFT/Species as defined in the guess instruction file</td>
</tr>
<tr class="even">
<td align="left">Lifeform</td>
<td align="center">integer</td>
<td align="left">value of Pft lifeform (enum {NOLIFEFORM, TREE, GRASS})</td>
</tr>
<tr class="odd">
<td align="left">LeafType</td>
<td align="center">integer</td>
<td align="left">value of Pft leafphysiognomy (enum {NOLEAFTYPE, NEEDLELEAF, BROADLEAF})</td>
</tr>
<tr class="even">
<td align="left">PhenType</td>
<td align="center">integer</td>
<td align="left">value of Pft phenology (enum {NOPHENOLOGY, EVERGREEN, RAINGREEN, SUMMERGREEN, CROPGREEN, ANY})</td>
</tr>
<tr class="odd">
<td align="left">Pathway</td>
<td align="center">integer</td>
<td align="left">value of Pft pathway (enum {NOPATHWAY, C3, C4})</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="center">integer</td>
<td align="left">value of cohort age</td>
</tr>
<tr class="odd">
<td align="left">LAI</td>
<td align="center">numeric</td>
<td align="left">value of cohort leaf area index</td>
</tr>
<tr class="even">
<td align="left">ShadeType</td>
<td align="center">numeric</td>
<td align="left">value of cohort alphar as a measure for shade tolerance class. Is ranked in the package.</td>
</tr>
<tr class="odd">
<td align="left">N</td>
<td align="center">integer</td>
<td align="left">number of individual per cohort. In individual mode this is 1.</td>
</tr>
<tr class="even">
<td align="left">DBH</td>
<td align="center">numeric</td>
<td align="left">individual tree diameter (equal for all members of the same cohort)</td>
</tr>
<tr class="odd">
<td align="left">Height</td>
<td align="center">numeric</td>
<td align="left">individual height</td>
</tr>
<tr class="even">
<td align="left">Crownarea</td>
<td align="center">numeric</td>
<td align="left">individual crown area</td>
</tr>
</tbody>
</table>
<p>So far not all of those values are used in the code. However, they seemed to be useful in the future. Do not run LPJ-GUESS with too many gridpoints with the above output module. This will create hundreds of GB or even TB of output!</p>
</div>
</div>
<div id="dgvm3d-workflow" class="section level1">
<h1>DGVM3D workflow</h1>
<p>For visualization each patch in a stand is represented by a hexagon with an individual number of soil layers as well as variable height. However, the patch size is equal for all patches.</p>
<div id="global-options" class="section level2">
<h2>Global options</h2>
<p>When the library is loaded a few global default options are set to reduce the number of function parameters passed through several cascading function calls. These options can be modified by <code>dgvm3d.options</code>.</p>
<table style="width:100%;">
<colgroup>
<col width="9%"></col>
<col width="10%"></col>
<col width="80%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Value</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patch.area</td>
<td>1000</td>
<td>The area of one patch in m^2</td>
</tr>
<tr class="even">
<td>samples</td>
<td>c(10, 10)</td>
<td>[1] Number of samples to determin next tree position; [2] max. repetition if no suitable position is found</td>
</tr>
<tr class="odd">
<td>overlap</td>
<td>0.5</td>
<td>fraction of crownradii to overlap with nearest neighbour during establishment</td>
</tr>
<tr class="even">
<td>sort.column</td>
<td>c(“Crownarea”, “descending”)</td>
<td>Determine the position for the largest trees first, then fill the gaps</td>
</tr>
<tr class="odd">
<td>establish.method</td>
<td>“random”</td>
<td>How to choose from the above sample for the next tree position</td>
</tr>
<tr class="even">
<td>beta.parameters</td>
<td>c(1.1, 0.9)</td>
<td>shape parameters for beta random value to determine the distance from the patch center</td>
</tr>
<tr class="odd">
<td>color.column</td>
<td>“ShadeType”</td>
<td>which data column to use for the canopy color</td>
</tr>
<tr class="even">
<td>verbose</td>
<td>TRUE</td>
<td>print some messages</td>
</tr>
</tbody>
</table>
</div>
<div id="get-the-data" class="section level2">
<h2>Get the data</h2>
<p>The function <code>read.LPJ</code> reads the above output if the output and extend cohorts to <code>N</code> average individuals, which will be rendered in varying shapes and colors based on the other attributes.</p>
</div>
<div id="establish-the-individual-trees" class="section level2">
<h2>Establish the individual trees</h2>
<p>The individual trees are by default randomly distributed within the inner radius of each patch hexagon with <code>establishVegetation</code>.</p>
</div>
<div id="visualisation" class="section level2">
<h2>Visualisation</h2>
<p><code>stand3D</code> renders the soil hexagons in a rgl window and <code>plant3D</code> renders the trees planted with <code>establishVegetation</code>.</p>
</div>
<div id="overview-applications" class="section level2">
<h2>Overview Applications</h2>
<p>With the function <code>snapshot</code> the trees present at the given year and for the given patches will be rendered. The function <code>succession</code> keeps the trees with the maximum distance to the nearest neighbour for each cohort at their position and those trees growing too close together are removed, when the number of individuums decreases. New trees are randomly distributed with the desired method. The removal of killed individuals is done in the function <code>updateStand</code>, which calls <code>establishVegetation</code> with the next years vegetation data.frame to distribute new trees.</p>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-smith_representation_2001">
<p>Smith, B., I. C. Prentice, and M. T. Sykes. 2001. “Representation of Vegetation Dynamics in the Modelling of Terrestrial Ecosystems: Comparing Two Contrasting Approaches Within European Climate Space.” <em>Global Ecology and Biogeography</em> 10 (6): 621–37. doi:<a href="https://doi.org/10.1046/j.1466-822X.2001.t01-1-00256.x">10.1046/j.1466-822X.2001.t01-1-00256.x</a>.</p>
</div>
<div id="ref-smith_implications_2014">
<p>Smith, B., D. Wårlind, A. Arneth, T. Hickler, P. Leadley, J. Siltberg, and S. Zaehle. 2014. “Implications of Incorporating N Cycling and N Limitations on Primary Production in an Individual-Based Dynamic Vegetation Model.” <em>Biogeosciences</em> 11 (7): 2027–54. doi:<a href="https://doi.org/10.5194/bg-11-2027-2014">10.5194/bg-11-2027-2014</a>.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
